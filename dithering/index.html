<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dither Everything!</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-container">
      <div class="canvas-section">
        <div class="canvas-container">
          <div class="canvas-wrapper">
            <canvas id="canvas"></canvas>
            <div class="upload-prompt" id="upload-prompt">
              <p>Drop an image here or click to upload</p>
              <p><i class="fas fa-cloud-upload-alt"></i></p>
            </div>
          </div>
        </div>
        <input type="file" id="image-input" accept="image/*" />
      </div>

      <div class="controls-panel" id="controls-panel">
        <div class="controls-header">
          <h1>Dither Everything!</h1>
          <div class="main-actions">
            <button id="upload-button" class="primary">
              <i class="fas fa-upload"></i> Import
            </button>
            <button id="download-button" class="primary disabled">
              <i class="fas fa-download"></i> Export
            </button>
          </div>
        </div>

        <div class="card zoom-card">
          <h3 class="card-title">Zoom Controls</h3>
          <div class="zoom-controls">
            <button id="zoom-in" class="secondary">
              <i class="fas fa-search-plus"></i> Zoom In
            </button>
            <button id="zoom-out" class="secondary">
              <i class="fas fa-search-minus"></i> Zoom Out
            </button>
            <button id="reset-zoom" class="secondary">
              <i class="fas fa-sync"></i> Reset Zoom
            </button>
          </div>
        </div>

        <div class="control-group">
          <div class="control-row">
            <label> Style </label>
            <select id="dithering-type">
              <option value="none">None</option>
              <option value="bayer">Bayer-Ordered</option>
              <option value="floyd-steinberg">Floyd-Steinberg</option>
              <option value="color-floyd-steinberg">Color Floyd-Steinberg</option>
              <option value="color-floyd-steinberg-palette">Color Floyd-Steinberg (Enhanced)</option>
              <option value="random">Random-Ordered</option>
              <option value="color-random">Color Random-Ordered</option>
              <option value="color-random-palette">Color Random-Ordered (Enhanced)</option>
              <option value="atkinson">Atkinson</option>
              <option value="bit-tone">Bit Tone</option>
            </select>
          </div>

          <div class="control-row" id="bayer-matrix-size-control" style="display: none;">
            <label>Matrix Size</label>
            <select id="bayer-matrix-size">
              <option value="2">2x2 (Coarse)</option>
              <option value="4">4x4 (Medium)</option>
              <option value="8" selected>8x8 (Fine)</option>
              <option value="16">16x16 (Very Fine)</option>
            </select>
          </div>

          <div class="control-row">
            <label>
              Scale
              <span id="dithering-scale-value">9</span>
            </label>
            <input
              type="range"
              id="dithering-scale"
              min="1"
              max="10"
              value="9"
              step="0.1"
            />
          </div>

          <div class="control-row">
            <label>
              Contrast
              <span id="contrast-value">51%</span>
            </label>
            <input type="range" id="contrast" min="0" max="200" value="51" />
          </div>

          <div class="control-row">
            <label>
              Midtones
              <span id="midtone-value">50%</span>
            </label>
            <input type="range" id="midtone" min="0" max="100" value="50" />
          </div>

          <div class="control-row">
            <label>
              Highlights
              <span id="highlights-value">71%</span>
            </label>
            <input type="range" id="highlights" min="0" max="100" value="71" />
          </div>

          <div class="control-row">
            <label>
              Luminance Threshold
              <span id="luminance-threshold-value">81%</span>
            </label>
            <input
              type="range"
              id="luminance-threshold"
              min="0"
              max="100"
              value="81"
            />
          </div>

          <div class="control-row">
            <label> Noise Filter </label>
            <select id="noise-filter-type">
              <option value="none">None</option>
              <option value="gaussian">Gaussian Noise</option>
              <option value="salt-pepper">Salt & Pepper</option>
              <option value="blur">Blur</option>
              <option value="pixelate">Pixelate</option>
            </select>
          </div>

          <div
            class="control-row"
            id="extra-filter-control"
            style="display: none"
          >
            <label>
              Filter Intensity
              <span id="extra-filter-value">0</span>
            </label>
            <input
              type="range"
              id="extra-filter"
              min="0"
              max="1"
              value="0"
              step="0.01"
            />
          </div>

          <div class="control-row checkbox-row">
            <label> Invert Colors </label>
            <input type="checkbox" id="invert-colors" />
          </div>

          <!-- Border Controls -->
          <div class="control-row checkbox-row">
            <label> Add Border </label>
            <input type="checkbox" id="enable-border" />
          </div>

          <div id="border-controls" style="display: none;">
            <div class="control-row">
              <label>
                Border Thickness
                <span id="border-thickness-value">5</span>px
              </label>
              <input
                type="range"
                id="border-thickness"
                min="1"
                max="50"
                value="5"
              />
            </div>

            <div class="control-row">
              <label>Border Color</label>
              <input type="color" id="border-color" value="#000000" />
            </div>

            <div class="control-row checkbox-row">
              <label>Double Border</label>
              <input type="checkbox" id="double-border" />
            </div>

            <div id="second-border-controls" style="display: none;">
              <div class="control-row">
                <label>
                  Second Border Thickness
                  <span id="second-border-thickness-value">3</span>px
                </label>
                <input
                  type="range"
                  id="second-border-thickness"
                  min="1"
                  max="30"
                  value="3"
                />
              </div>

              <div class="control-row">
                <label>Second Border Color</label>
                <input type="color" id="second-border-color" value="#ffffff" />
              </div>
            </div>
          </div>
        </div>

        <div class="button-group">
          <button id="reset-button" class="secondary">
            <i class="fas fa-undo"></i> Reset All
          </button>
        </div>

        <div class="keyboard-hint">
          <p>Ctrl+Shift+/ for help</p>
        </div>
      </div>
    </div>

    <script type="module" src="/js/app.js"></script>
  </body>
</html>
